<!DOCTYPE html>
<html>
<head>
<title>College Spin Event</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    font-family: Arial;
    text-align:center;
    background:#111;
    color:white;
}
.container{
    margin-top:100px;
}
input{
    padding:10px;
    font-size:18px;
}
button{
    padding:10px 20px;
    font-size:18px;
    cursor:pointer;
}
#resultBox{
    font-size:24px;
    margin-top:20px;
}
</style>
</head>

<body>

<div class="container" id="passwordPage">
    <h2>Enter Event Password</h2>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <br><br>
    <button onclick="checkPassword()">Enter</button>
    <p id="errorMsg" style="color:red;"></p>
</div>

<div class="container" id="spinPage" style="display:none;">
    <h2>Spin The Wheel</h2>
    <button id="spinBtn" onclick="spinWheel()">SPIN</button>
    <div id="resultBox"></div>
</div>

<script>

// PASSWORD
const correctPassword = "LSSATYA0717";

// Check password
function checkPassword(){
    let userPass = document.getElementById("passwordInput").value;
    if(userPass === correctPassword){
        document.getElementById("passwordPage").style.display="none";
        document.getElementById("spinPage").style.display="block";
    } else {
        document.getElementById("errorMsg").innerText="Wrong Password!";
    }
}

// Prevent back navigation
history.pushState(null, null, location.href);
window.onpopstate = function () {
    history.go(1);
};

// Check if already played
if(localStorage.getItem("played") === "yes"){
    document.getElementById("passwordPage").innerHTML="<h2>You Already Played!</h2>";
}

// Spin logic
function spinWheel(){

    if(localStorage.getItem("played") === "yes"){
        return;
    }

    let spinCount = localStorage.getItem("spinCount");
    if(!spinCount){
        spinCount = 0;
    }

    spinCount = parseInt(spinCount) + 1;
    localStorage.setItem("spinCount", spinCount);

    let result;

    // 16 lose + 1 win logic
    if(spinCount % 17 === 0){
        result = "FREE ðŸŽ‰";
    } else {
        result = "BETTER LUCK NEXT TIME ðŸ˜¢";
    }

    document.getElementById("resultBox").innerHTML = "<h3>"+result+"</h3>";

    document.getElementById("spinBtn").disabled = true;

    localStorage.setItem("played","yes");
}

</script>

</body>
</html>
